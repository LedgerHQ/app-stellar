from ledgerblue.comm import getDongle
from time import sleep 


dongle = getDongle(True)


get_config = "E006000000"

get_addr = "E00200010D038000002C8000009480000000"

sign_tx_hash = "E00800002D038000002C8000009480000000AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"

sign_tx_multi_op = [
    "E004008096038000002C8000009480000000CEE0302D59844D32BDCA915C8203DD44B33FBB7EDC19051EA37ABEDF28ECD4720000000200000000065ADB74BD543753DAF5E8FC0D34D04A23152787A51261D9F2135E5E47701648000000C800631490000000010000000000000001000000086D756C74692D6F7000000002000000000000000800000000587C6888218A7B78DC7205E803E8FA28FA",
    "E00480004C0C7BDBCC24AEA2EFE6770C94863DA5000000000000000700000000587C6888218A7B78DC7205E803E8FA28FA0C7BDBCC24AEA2EFE6770C94863DA5000000014A505900000000010000000000"
]

sign_tx = [
    "E004008096038000002C80000094800000007AC33997544E3175D266BD022439B22CDB16508C01163F26E5CB2A3E1045A97900000002000000006014D7B26CC7D149AFDAACA47689F7EB6FF0A0115239B7495B858A0B9DE73A420000006401AF9B2400000007000000010000000000000000000000005EA01DFA00000000000000010000000000000001000000006014D7B26CC7D149AFDAACA400",
    "E00480002389F7EB6FF0A0115239B7495B858A0B9DE73A420000000000000000000F424000000000"
]


sign_tx_with_memo = [
    "E004008096038000002C80000094800000007AC33997544E3175D266BD022439B22CDB16508C01163F26E5CB2A3E1045A97900000002000000006014D7B26CC7D149AFDAACA47689F7EB6FF0A0115239B7495B858A0B9DE73A420000006401AF9B2400000007000000010000000000000000000000005EA01E4900000001000000187468697320697320612076657279206C6F6E67206D656D6F00",
    "E00480003F0000010000000000000001000000006014D7B26CC7D149AFDAACA47689F7EB6FF0A0115239B7495B858A0B9DE73A420000000000000000000F424000000000"
]

# result = dongle.exchange(bytearray.fromhex(get_config))

# result = dongle.exchange(bytearray.fromhex(get_addr))

# #wait, signature takes a moment
# sleep(3)

# don't forget to enable hash signing in the settings otherwise this call will fail with error 0x6c66
result = dongle.exchange(bytearray.fromhex(sign_tx_hash))

result = dongle.exchange(bytearray.fromhex(sign_tx_multi_op[0]))
result = dongle.exchange(bytearray.fromhex(sign_tx_multi_op[1]))

result = dongle.exchange(bytearray.fromhex(sign_tx[0]))
result = dongle.exchange(bytearray.fromhex(sign_tx[1]))

result = dongle.exchange(bytearray.fromhex(sign_tx_with_memo[0]))
result = dongle.exchange(bytearray.fromhex(sign_tx_with_memo[1]))

